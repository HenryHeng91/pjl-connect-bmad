# Story 1.4: Service Management (CRUD)

**Status:** Draft

**Story:**
**As a** Manager,
**I want** to create, read, update, and delete the services PJL offers, including their selling prices,
**so that** we have a centralized and accurate price book for use in quotations and P&L calculations.

**Acceptance Criteria:**
1.  A "Services" section is accessible in the Back Office UI only to users with the "Manager" role.
2.  The manager can view a list of all existing services with their selling prices.
3.  The manager can add a new service with a name, description, and price.
4.  The manager can edit and delete existing services.

**Tasks / Subtasks:**
- [ ] Task 1 (AC: 1): Implement a middleware or gate to restrict access to the Service Management section to users with the "Manager" role.
- [ ] Task 2 (AC: 2): Create a Vue component to display a list of services from the database.
- [ ] Task 3 (AC: 3): Create a form component (Vue) for adding a new service.
- [ ] Task 4 (AC: 3): Create a new controller and route in Laravel to handle the creation of a new service.
- [ ] Task 5 (AC: 4): Implement functionality to edit an existing service.
- [ ] Task 6 (AC: 4): Implement functionality to delete a service.

**Dev Notes:**
*   **Data Model:** This story will use the `services` table. The schema is defined in `docs/architecture/database-schema.md`.
    *   **Service Fields:** The UI form and backend controller should handle the following fields: `name` (text), `description` (textarea), `price` (decimal number).
*   **File Paths:**
    *   **Controller:** `app/Http/Controllers/ServiceController.php`
    *   **Model:** `app/Models/Service.php`
    *   **Migration:** A new migration will be needed to create the `services` table as defined in the schema.
    *   **Frontend Index Page:** `resources/js/Pages/Services/Index.vue`
    *   **Frontend Form Component:** `resources/js/Components/Services/Form.vue`
*   **Backend:**
    *   The `ServiceController` will handle the CRUD operations. [Source: docs/architecture/backend-architecture.md]
    *   The `Service` model will be used. [Source: docs/architecture/data-models.md]
    *   Implement resource routes in `routes/web.php` for the CRUD operations. [Source: docs/architecture/backend-architecture.md]
*   **Frontend:**
    *   The `Index.vue` page will list the services. The list should be a table displaying the `name`, `description`, and `price`.
    *   The `Form.vue` component will be used for adding and editing services and should contain fields for `name`, `description`, and `price`.
*   **Security:**
    *   Use Laravel's authorization features (Gates or Policies) to implement the role-based access control for all service routes. [Source: docs/architecture/security-and-performance.md]
*   **Testing:**
    *   Backend tests (Pest/PHPUnit) should cover the CRUD operations in the `ServiceController` and the authorization logic. [Source: docs/architecture/testing-strategy.md]
    *   Frontend tests (Vitest) should cover the display of services, form submission, and validation. [Source: docs/architecture/testing-strategy.md]

**Change Log:**
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-28 | 1.0 | Initial draft | Bob (SM) |

**Dev Agent Record:**
**Agent Model Used:**
**Debug Log References:**
**Completion Notes List:**
**File List:**

**QA Results:**