# Story 1.4: Service Management (CRUD)

**Status:** Draft

**Story:**
**As a** Manager,
**I want** to create, read, update, and delete the services PJL offers, including their selling prices,
**so that** we have a centralized and accurate price book for use in quotations and P&L calculations.

**Acceptance Criteria:**
1.  A "Services" section is accessible in the Back Office UI only to users with the "Manager" role.
2.  The manager can view a list of all existing services with their selling prices.
3.  The manager can add a new service with a name, description, and price.
4.  The manager can edit and delete existing services.

**Tasks / Subtasks:**
- [ ] Task 1 (AC: 1): Implement a middleware or gate to restrict access to the Service Management section to users with the "Manager" role.
- [ ] Task 2 (AC: 2): Create a Vue component to display a list of services from the database.
- [ ] Task 3 (AC: 3): Create a form component (Vue) for adding a new service.
- [ ] Task 4 (AC: 3): Create a new controller and route in Laravel to handle the creation of a new service.
- [ ] Task 5 (AC: 4): Implement functionality to edit an existing service.
- [ ] Task 6 (AC: 4): Implement functionality to delete a service.

**Dev Notes:**
*   **Conflict Detected:** The `database-schema.md` in the architecture documentation does not currently include a `services` table, which is required for this story. The developer will need to create a new migration for the `services` table. The table should include columns for `id`, `name`, `description`, and `price`.
*   **Data Model:** This story will require a new `Service` model and a corresponding `services` table in the database.
*   **Backend:**
    *   Create a `ServiceController` to handle the CRUD operations. [Source: docs/architecture/backend-architecture.md]
    *   Create a `Service` model. [Source: docs/architecture/data-models.md]
    *   Implement routes in `routes/web.php` for the CRUD operations. [Source: docs/architecture/backend-architecture.md]
*   **Frontend:**
    *   Create a `ServiceIndex.vue` page to list the services. [Source: docs/architecture/frontend-architecture.md]
    *   Create a `ServiceForm.vue` component for adding and editing services. [Source: docs/architecture/frontend-architecture.md]
*   **Security:**
    *   Use Laravel's authorization features (Gates or Policies) to implement the role-based access control. [Source: docs/architecture/security-and-performance.md]
*   **Testing:**
    *   Backend tests (Pest/PHPUnit) should cover the CRUD operations in the `ServiceController` and the authorization logic. [Source: docs/architecture/testing-strategy.md]
    *   Frontend tests (Vitest) should cover the display of services, form submission, and validation. [Source: docs/architecture/testing-strategy.md]

**Change Log:**
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-28 | 1.0 | Initial draft | Bob (SM) |

**Dev Agent Record:**
**Agent Model Used:**
**Debug Log References:**
**Completion Notes List:**
**File List:**

**QA Results:**