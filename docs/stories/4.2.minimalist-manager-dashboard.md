# Story 4.2: Minimalist Manager Dashboard

**Status:** Draft

**Story:**
**As a** Manager,
**I want** to see a simple dashboard with high-level KPIs,
**so that** I can get a quick overview of business performance.

**Acceptance Criteria:**
1.  A new "Dashboard" page is created in the Back Office, accessible only to users with the "Manager" role.
2.  The page displays key metrics: Total Profit & Loss, Average Booking Processing Time, and Total Shipments.
3.  The manager can filter these metrics by a simple time period (e.g., "This Week", "This Month", "Last Month").
4.  The page also displays the three widget metrics defined in Story 4.1 (Bookings this week, Shipments in transit, Shipments delivered this week).

**Tasks / Subtasks:**
- [ ] Task 1 (AC: 1): Create a new route and controller for the Manager Dashboard page, restricted to "Manager" roles.
- [ ] Task 2 (AC: 2, 4): Create a Vue component for the Dashboard page that displays the key metrics and widgets.
- [ ] Task 3 (AC: 2, 4): Implement the backend logic to retrieve the aggregated data for the KPIs from the `reporting_metrics` table.
- [ ] Task 4 (AC: 3): Implement a simple UI for filtering the data by time period, which will call the appropriate API endpoints defined in Story 4.1.

**Dev Notes:**
*   **Core Workflow:** This story is part of the "Manager Insights & Reporting" workflow.
*   **Data Models:** This story will consume the aggregated data prepared in Story 4.1.
*   **File Paths:**
    *   **Controller:** `app/Http/Controllers/DashboardController.php`
    *   **Frontend Page:** `resources/js/Pages/Dashboard/Index.vue`
*   **Backend:**
    *   Create a new `DashboardController` to fetch the pre-aggregated data from the `reporting_metrics` table via the API endpoints created in Story 4.1.
*   **Frontend:**
    *   The UI should be minimalist and focus on displaying the key KPIs clearly. The dashboard should display the three main KPIs at the top, with the three widget metrics from Story 4.1 displayed below them.
    *   The filter should be a simple dropdown component located at the top-right of the page, with the options: "This Week", "This Month", and "Last Month".
*   **Security:**
    *   Use Laravel's authorization features (Gates or Policies) to implement the role-based access control.
*   **Testing:**
    *   Backend tests should cover the data retrieval and authorization logic.
    *   Frontend tests should cover the display of the KPIs and the filtering functionality.

**Change Log:**
| Date       | Version | Description                               | Author     |
| :---       | :---    | :---                                      | :---       |
| 2025-09-01 | 2.0     | Aligned metrics with Story 4.1 and added widgets | Sarah (PO) |
| 2025-08-28 | 1.0     | Initial draft                             | Bob (SM)   |
