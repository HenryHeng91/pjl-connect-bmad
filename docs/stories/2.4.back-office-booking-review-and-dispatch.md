# Story 2.4: Back-Office Booking Review & Dispatch

**Status:** Draft

**Story:**
**As an** Ops Team Member,
**I want** to review the details of an assigned booking, select a carrier, and dispatch the job from the Back Office,
**so that** I can move the shipment to the next stage.

**Acceptance Criteria:**
1.  The Ops member can open the booking detail view directly from their Telegram link.
2.  They can verify and, if necessary, edit the OCR-extracted data.
3.  The UI provides an interface to select a registered carrier from a list.
4.  A "Dispatch to Carrier" button is available, which updates the shipment status to "Dispatched".

**Tasks / Subtasks:**
- [ ] Task 1 (AC: 1): Implement a route that can be opened from a Telegram link to the booking detail view.
- [ ] Task 2 (AC: 2): Create a Vue component for the booking detail view that displays all the shipment information and allows for editing.
- [ ] Task 3 (AC: 3): Implement a dropdown or a searchable list in the UI to select a carrier from the `carriers` table.
- [ ] Task 4 (AC: 4): Implement the logic for the "Dispatch to Carrier" button to update the shipment status and trigger the next step in the workflow.

**Dev Notes:**
*   **Core Workflow:** This story is a key part of the "New Booking Ingestion" workflow. [Source: docs/architecture/core-workflows.md]
*   **Data Models:** This story will use the `shipments` and `carriers` tables. The schemas are defined in `docs/architecture/database-schema.md`.
*   **Backend:**
    *   Create a `ShipmentController` to handle the display and update of shipment information. [Source: docs/architecture/backend-architecture.md]
*   **Frontend:**
    *   Create a `BookingDetailView.vue` page. [Source: docs/architecture/frontend-architecture.md]
    *   The page should be designed to be clear and task-oriented, allowing the Ops member to quickly review and dispatch the booking.
*   **Testing:**
    *   Backend tests (Pest/PHPUnit) should cover the `ShipmentController` methods. [Source: docs/architecture/testing-strategy.md]
    *   Frontend tests (Vitest) should cover the booking detail view, the carrier selection, and the dispatch button. [Source: docs/architecture/testing-strategy.md]

**Change Log:**
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-28 | 1.0 | Initial draft | Bob (SM) |

**Dev Agent Record:**
**Agent Model Used:**
**Debug Log References:**
**Completion Notes List:**
**File List:**

**QA Results:**