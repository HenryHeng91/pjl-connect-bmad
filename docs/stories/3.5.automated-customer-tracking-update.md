# Story 3.5: Automated Customer Tracking Update

**Status:** Draft

**Story:**
**As a** Customer,
**I want** to receive a final confirmation and a tracking link via Telegram once my shipment is on its way,
**so that** I have full visibility of my delivery.

**Acceptance Criteria:**
1.  When the shipment status changes to "In Transit", a message is automatically sent to the Customer Telegram bot.
2.  The message includes final carrier and truck details.
3.  The message contains a web link that opens a simple page displaying the driver's live location on a map.

**Tasks / Subtasks:**
- [ ] Task 1 (AC: 1): Create an event listener that triggers when a shipment's status changes to "In Transit".
- [ ] Task 2 (AC: 2): In the event listener, send a notification to the Customer Telegram bot with the carrier and truck details.
- [ ] Task 3 (AC: 3): The notification should include a publicly accessible web link to a page that displays the driver's live location on a map.

**Dev Notes:**
*   **External APIs:** This story requires integration with the Telegram Bot API to send messages. [Source: docs/architecture/external-apis.md]
*   **Core Workflow:** This story is part of the "Live Tracking & Customer Communication" workflow.
*   **Data Models:** This story will read from the `shipments` table. The schema is defined in `docs/architecture/database-schema.md`.
*   **Backend:**
    *   Use the `TelegramNotificationService` to send the message to the customer. [Source: docs/architecture/components.md]
    *   The web page for displaying the driver's location should be a simple, lightweight page that does not require authentication.
*   **Testing:**
    *   Backend tests (Pest/PHPUnit) should cover the event listener and the sending of the notification. It would be beneficial to mock the Telegram API. [Source: docs/architecture/testing-strategy.md]

**Change Log:**
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-28 | 1.0 | Initial draft | Bob (SM) |

**Dev Agent Record:**
**Agent Model Used:**
**Debug Log References:**
**Completion Notes List:**
**File List:**

**QA Results:**