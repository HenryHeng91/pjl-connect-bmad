# Story 1.3: Carrier Management (CRUD)

**Status:** Draft

**Story:**
**As a** Manager,
**I want** to create, read, update, and delete carriers in the Back Office,
**so that** I can maintain an up-to-date list of our logistics partners and their cost data.

**Acceptance Criteria:**
1.  A "Carriers" section is accessible in the Back Office UI only to users with the "Manager" role.
2.  The manager can view a list of all existing carriers.
3.  The manager can add a new carrier with relevant details (e.g., company name, contact info, cost prices for services).
4.  The manager can edit and delete existing carriers.

**Tasks / Subtasks:**
- [ ] Task 1 (AC: 1): Implement a middleware or gate to restrict access to the Carrier Management section to users with the "Manager" role.
- [ ] Task 2 (AC: 2): Create a Vue component to display a list of carriers from the database.
- [ ] Task 3 (AC: 3): Create a form component (Vue) for adding a new carrier.
- [ ] Task 4 (AC: 3): Create a new controller and route in Laravel to handle the creation of a new carrier.
- [ ] Task 5 (AC: 4): Implement functionality to edit an existing carrier.
- [ ] Task 6 (AC: 4): Implement functionality to delete a carrier.

**Dev Notes:**
*   **Data Model:** This story will use the `carriers` table. The schema is defined in `docs/architecture/database-schema.md`.
    *   **Carrier Fields:** The UI form and backend controller should handle the following fields: `company_name`, `contact_person`, `phone_number`, `email`, `cost_details`.
*   **File Paths:**
    *   **Controller:** `app/Http/Controllers/CarrierController.php`
    *   **Model:** `app/Models/Carrier.php`
    *   **Migration:** A new migration will be needed to create the `carriers` table as defined in the schema.
    *   **Frontend Index Page:** `resources/js/Pages/Carriers/Index.vue`
    *   **Frontend Form Component:** `resources/js/Components/Carriers/Form.vue`
*   **Backend:**
    *   The `CarrierController` will handle the CRUD operations. [Source: docs/architecture/backend-architecture.md]
    *   The `Carrier` model will be used. [Source: docs/architecture/data-models.md]
    *   Implement resource routes in `routes/web.php` for the CRUD operations. [Source: docs/architecture/backend-architecture.md]
*   **Frontend:**
    *   The `Index.vue` page will list the carriers. [Source: docs/architecture/frontend-architecture.md]
    *   The `Form.vue` component will be used for adding and editing carriers. [Source: docs/architecture/frontend-architecture.md]
*   **Security:**
    *   Use Laravel's authorization features (Gates or Policies) to implement the role-based access control for all carrier routes. [Source: docs/architecture/security-and-performance.md]
*   **Testing:**
    *   Backend tests (Pest/PHPUnit) should cover the CRUD operations in the `CarrierController` and the authorization logic. [Source: docs/architecture/testing-strategy.md]
    *   Frontend tests (Vitest) should cover the display of carriers, form submission, and validation. [Source: docs/architecture/testing-strategy.md]

**Change Log:**
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-28 | 1.0 | Initial draft | Bob (SM) |

**Dev Agent Record:**
*   **Agent Model Used:**
*   **Debug Log References:**
*   **Completion Notes:**
*   **File List:**
*   **Change Log:**

**QA Results:**
*   **QA Agent:**
*   **Review Date:**
*   **Findings:**
*   **Decision:**
*   **Confidence Score:**
*   **Regression Test Plan:**
*   **Notes:**