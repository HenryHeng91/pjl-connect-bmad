# Story 3.1: Carrier Submits Arrangement Details

**Status:** Draft

**Story:**
**As a** Carrier,
**I want** to provide the specific truck and driver details via my Telegram bot after accepting a job,
**so that** the Ops team has the final arrangement information.

**Acceptance Criteria:**
1.  After a carrier accepts a booking, the bot prompts them for the truck plate number, truck size, and the driver's Telegram username.
2.  The system validates the input provided by the carrier.
3.  The shipment record in the Back Office is updated with this information, and its status changes to "Ready for Pickup".

**Tasks / Subtasks:**
- [ ] Task 1 (AC: 1): After a carrier accepts a job, send a series of prompts to their Telegram bot to collect the truck and driver details.
- [ ] Task 2 (AC: 2): Implement input validation for the collected details (e.g., check for valid Telegram username format).
- [ ] Task 3 (AC: 3): Update the corresponding `shipment` record in the database with the collected information.
- [ ] Task 4 (AC: 3): Change the shipment status to "Ready for Pickup".

**Dev Notes:**
*   **External APIs:** This story requires integration with the Telegram Bot API to send messages and receive user input. [Source: docs/architecture/external-apis.md]
*   **Core Workflow:** This story is part of the "Live Tracking & Customer Communication" workflow.
*   **Data Models:** This story will update the `shipments` table. The schema is defined in `docs/architecture/database-schema.md`.
*   **Backend:**
    *   The logic for prompting the user and handling their input should be encapsulated in a service or a state machine to manage the conversation flow. [Source: docs/architecture/backend-architecture.md]
*   **Testing:**
    *   Backend tests (Pest/PHPUnit) should cover the conversation flow with the carrier, the input validation, and the database updates. It would be beneficial to mock the Telegram API. [Source: docs/architecture/testing-strategy.md]

**Change Log:**
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-28 | 1.0 | Initial draft | Bob (SM) |

**Dev Agent Record:**
**Agent Model Used:**
**Debug Log References:**
**Completion Notes List:**
**File List:**

**QA Results:**